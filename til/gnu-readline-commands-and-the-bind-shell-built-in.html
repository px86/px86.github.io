<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2023-05-04 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GNU readline commands and the bind shell built-in</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Pushkar Raj">
<link rel="icon" type="image/x-icon" href="/assets/favicon.ico"/> 
<link rel="stylesheet" type="text/css" href="/assets/css/style.css"/> 
<link rel="stylesheet" type="text/css" href="/assets/css/fonts.css"/> 
<script type="text/javascript" src="/assets/js/script.js" defer></script> 
</head>
<body>
<header id="preamble" class="status">
<div class="container">
  <div class="user-info">
    <img alt="Profile Picture" src="https://avatars.githubusercontent.com/u/86090336"/>
    <a class="user-name" href="/">Pushkar Raj</a>
    <div id="toggler"></div>
  </div>
  <nav>
    <ul>
      <li><a href="/about.html">About</a></li>
      <li><a href="/contact.html">Contact</a></li>
      <li><a href="/articles">All Articles</a></li>
      <li><a href="/til">Today I Learnt</a></li>
      <li><a href="https://github.com/px86">My Github</a></li>
    </ul>
  </nav>
  <!-- Use CSS and JS to place this date below the post heading. -->
  <div id="date"><span class="timestamp">2023-05-04</span></div>
</div>
</header>
<main id="content">
<header>
<h1 class="title">GNU readline commands and the bind shell built-in</h1>
<p class="subtitle">becoming more efficient at the shell prompt</p>
</header><p>
I already knew that most shells use <i>GNU Readline</i>, or similar libraries for providing line editing capabilities. I also created a similar but much simpler and smaller, C++ library called <a href="https://github.com/px86/linereader">linereader</a> last year (while I was in college).
</p>

<p>
Today I learnt that readline has a large number of commands for text-editing, kill-ring management, completions, etc. and some of them are bound to keys. Very much like emacs. As a result we can customize the behavior by rebinding the keys and the commands as we like.
</p>

<p>
Readline can be customized using a configuration file. The <code>INPUTRC</code> environment variable is read, to figure out where the configuration file is. If this variable is not set, then the default <code>~/.inputrc</code> is considered.
</p>

<div id="outline-container-org4d52db2" class="outline-2">
<h2 id="org4d52db2">The <code>bind</code> bash built in</h2>
<div class="outline-text-2" id="text-org4d52db2">
<p>
The <code>bind</code> shell built-in can be use to set keybindings to readline functions. We can learn more about it using the <code>help bind</code> shell command.
</p>

<p>
Some of the useful commands are:
</p>

<ul class="org-ul">
<li><code>bind -l</code> lists all the readline functions</li>

<li><code>bind -p</code> lists readline functions and bindings in a format that can be used as input in <code>~/.inputrc</code> file of to bind command itself</li>

<li><code>bind 'keysequence: READLINE-FUNCTION'</code> this will bind the keysequence to given readline function</li>

<li><code>bind -x 'keysequence: SHELL-COMMAND'</code> this is a really neat feature, wherein we can bind arbitrary shell commands (not just readline commands) to keys. e.g. running the below command will bind <code>C-n</code> to the <code>ls -al</code> shell command</li>
</ul>

<div class="org-src-container">
<pre class="src src-shell">bind -x <span class="org-string">'"\C-n": ls -al'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6635bd5" class="outline-2">
<h2 id="org6635bd5">The <code>menu-complete</code> readline command</h2>
<div class="outline-text-2" id="text-org6635bd5">
<p>
I have to use Windows for my work! ðŸ¥² I hate it. However being used to the command-line way of doing things, I always end up using <i>powershell</i> in windows. One thing I liked in <i>powershell</i> is the completions behavior when I repeatedly press the <code>TAB</code>  key. It cycles through each possible completion and updates the current line, unlike (default) <i>bash</i> where it prints all possible completions and moves the prompt below the printed lines. However, I came to know that there is a readline command called <code>menu-complete</code> which provides (almost! not sure) similar feature like <i>powershell</i>.
</p>

<p>
Try it with the <code>bind 'Tab: menu-complete'</code> command or put <code>Tab: menu-complete</code> in your <code>~/.inputrc</code>
</p>
</div>
</div>


<div id="outline-container-org98a0ea6" class="outline-2">
<h2 id="org98a0ea6">Resources</h2>
<div class="outline-text-2" id="text-org98a0ea6">
<ul class="org-ul">
<li>Arch linux readline man page: <a href="https://man.archlinux.org/man/readline.3">https://man.archlinux.org/man/readline.3</a></li>
<li>GNU readline library documentation: <a href="https://tiswww.cwru.edu/php/chet/readline/readline.html">https://tiswww.cwru.edu/php/chet/readline/readline.html</a></li>
</ul>
</div>
</div>
</main>
<footer id="postamble" class="status">
<p class="footer-block">
  Copyright &copy 2021-2023 Pushkar Raj. Read the notice about <a href="/license.html">license terms</a>.
</p>
<p class="footer-block">
  Created using <a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.1 (<a href="https://orgmode.org">Org</a> mode 9.3)
</p>
</footer>
</body>
</html>
